function progSliderCalcPos(a,b){a.find(".progSlider-handle");var d="true"===a.attr("data-progSlider-vertical")?!0:!1,c=d?1-(b.pageY-a.offset().top)/a.height():(b.pageX-a.offset().left)/a.width(),e=parseInt(a.attr("data-progSlider-max")*c,10);e<=a.attr("data-progSlider-max")&&e>=a.attr("data-progSlider-min")&&a.children(".progSlider-progress").css(d?"height":"width",100*c+"%")&&a.trigger("onSlide",[e])} $("html").on("mouseup",function(a){progSlider=$("[data-progSlider-drag=true]");0<progSlider.length&&progSlider.attr("data-progSlider-drag",!1).trigger("onSet",[progSlider.getProgSlider()])});$("html").on("mousemove",function(a){var b=$("[data-progSlider-drag=true]");0<b.length&&progSliderCalcPos(b,a)}); $.fn.extend({progSlider:function(a){var b={min:a&&a.min||0,max:a&&a.max||100,start:a&&a.start||50,onSlide:a&&a.onSlide,onSet:a&&a.onSet,onChange:a&&a.onChange};b.min=0>b.min?0:b.min;b.start=0>b.start?0:b.start;b.start=b.start>b.max?b.max:b.start;return this.each(function(){var d=$(this);b.vertical=a&&a.vertical||d.height()>d.width()?!0:!1;var c="true"===d.attr("data-progSlider")?!0:!1;!c&&d.html("").append("<div class='progSlider-progress'><div class='progSlider-handle'></div></div>");d.children(".progSlider-progress").css(b.vertical? "height":"width",100*b.start/b.max+"%");d.attr({"data-progSlider":!0,"data-progSlider-min":b.min,"data-progSlider-max":b.max,"data-progSlider-start":b.start,"data-progSlider-vertical":b.vertical});b.onSlide&&d.on("onSlide",function(a,c){b.onSlide(c);d.trigger("onChange",[c])});b.onSet&&d.on("onSet",function(a,c){b.onSet(c);d.trigger("onChange",[c])});b.onChange&&d.on("onChange",function(a,c){b.onChange(c)});!c&&d.on("click",function(a){progSliderCalcPos($(this),a)});!c&&d.on("mousedown",function(a){d.attr("data-progSlider-drag", !0)})})},setProgSlider:function(a,b){$(this).each(function(d,c){c=$(c);if("true"===c.attr("data-progSlider")){var e=c.attr("data-progSlider-max"),f="true"===c.attr("data-progSlider-vertical")?!0:!1;a=a<=e?a:e;c.children(".progSlider-progress").css(f?"height":"width",100*a/e+"%");!0===b&&c.trigger("onSet",[a])}})},getProgSlider:function(a){var b=[];$(this).each(function(a,c){c=$(c);var e="true"===c.attr("data-progSlider-vertical")?c.children(".progSlider-progress").height()/c.height():c.children(".progSlider-progress").width()/ c.width();b.push(parseInt(e*c.attr("data-progSlider-max"),10))});return 1===b.length?b[0]:b}});